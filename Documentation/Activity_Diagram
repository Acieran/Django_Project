@startuml
participant Frontend
participant Order
participant OrderItem
participant FlowerCart
participant User
participant Flower
participant Database

activate Frontend
Frontend -> Flower: Get flower(s)
activate Flower
Flower -> Database: Get flower(s)
activate Database
Database --> Flower: Flower(s) data
deactivate Database
Flower --> Frontend: Flower(s) data
deactivate Flower

Frontend -> Flower: Add Flower/Update Flower/Delete Flower/Decrease Stock
activate Flower
Flower -> Database: Add Flower/Update Flower/Delete Flower/Decrease Stock
deactivate Flower

Frontend -> User: (Add/Update/Delete/LogOut/LogIn) User
activate User
User -> Database: (Add/Update/Delete/LogOut/LogIn) User
activate Database
Database -> User: User (Added/Updated/Deleted/LoggedOut/LoggedIn)
deactivate Database
User -> Frontend: Show next view
deactivate User

Frontend -> User: Get Profile/Get Users
activate User
User -> Database: Get Profile/Get Users
activate Database
Database -> User: Profile Data/Users Data
deactivate Database
User -> Frontend: Show Profile View/Show Users View
deactivate User

Frontend -> User: Get Order History
activate User
User -> Order: Get Orders of User
activate Order
Order -> Database: Get Orders of User
activate Database
Database -> Order: User Orders Data
deactivate Database
Order -> User: User Orders Data
deactivate Order
User -> Frontend: Show User Orders
deactivate User

Frontend -> Order: Get Orders
activate Order
Order -> Database: Get Orders
activate Database
Database -> Order: Orders Data
deactivate Database
Order -> Frontend: Show Orders View
deactivate Order

Frontend -> Order: Get Order
activate Order
Order -> Database: Get Order
activate Database
Database -> Order: Order Data
deactivate Database
Order -> OrderItem: Get OrderItem Data(logic above)
activate OrderItem
OrderItem -> User: Check Current User
activate User
User -> Frontend: User cant see this Order Forbidden(Return none)
User -> OrderItem: User can see this Order
deactivate User
OrderItem -> Database: Get OrderItems
activate Database
Database -> OrderItem: Return OrderItems
deactivate Database
OrderItem -> Order: Return OrderItems
deactivate OrderItem
Order -> Frontend: Show Order Details
deactivate Order

Frontend -> Order: Add item to cart(Flower, quantity)
activate Order
Order -> Database: Create new order
activate Database
Database --> Order: Order Created
deactivate Database
Order --> Frontend: Cart updated
deactivate Order

Frontend -> Order: Open cart
activate Order
Order -> Database: Get Order Data
activate Database
Database --> Order: Order data
deactivate Database
Order --> Frontend: Cart data
deactivate Order

Frontend -> Order: Place order(User not exists)
activate Order
Order -> User: Check if user registered
deactivate Order
activate User
User --> Database: If user not exists
activate Database
Database --> User: Need to register
deactivate Database
User -> Frontend: Registration Form
deactivate User
deactivate Order


Frontend -> Order: Place order(User exists)
activate Order
Order -> User: Check if user registered
activate User
User --> Database: User exists
activate Database
Database --> User: User exists
deactivate Database
User --> Order: User exists
deactivate User
Order --> Database: Place Order
activate Database
Database --> Order: Order Created
deactivate Database
Order --> Frontend: Order Created
deactivate Order

Frontend -> Order: Check order status
activate Order
Order -> Database: Get order data
activate Database
Database --> Order: order data
deactivate Database
Order --> Frontend: order data
deactivate Order


Frontend -> Order: Delete Order
activate Order
Order -> Database: Delete Order in BD
deactivate Order

deactivate Frontend

@enduml